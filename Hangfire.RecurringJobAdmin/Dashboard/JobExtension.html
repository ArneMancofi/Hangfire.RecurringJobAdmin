<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
<script defer type="text/javascript" src="JobConfiguration/js/page"></script>

<div id="app">
    <div class="row">

        <div class="col-md-12" style="margin-top: 30px">
            <h1 class="page-header">Recurring Jobs <span class="badge badge-warning">{{jobs.length}}</span></h1>
            <button type="button" class="btn btn-primary" style="margin-bottom: 20px;" onclick="onPost()">Add new Job</button>
            <br/>
            <div class="table-responsive">
                <table class="table">

                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Cron</th>
                            <th>Queue</th>
                            <th>Method</th>
                            <th>Last Execution</th>
                            <th>Next Execution</th>
                            <th>Options</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="job in jobs">
                            <td>{{job.Id}}</td>
                            <td>{{job.Cron}}</td>
                            <td>{{job.Queue}}</td>
                            <td></td>
                            <td>{{job.LastExecution}}</td>
                            <td>{{job.NextExecution}}</td>
                            <td> <button type="button" class="btn btn-warning" onclick="onPost()">Edit</button></td>
                        </tr>

                    </tbody>
                </table>
            </div>




        </div>
    </div>
</div>

<script>
    var appJob = new Vue({
        el: '#app',
        data() {
            return {
                jobs: null,
            }
        },
        mounted() {

            axios
                .get('JobConfiguration/post')
                .then(res => (this.jobs = res.data))
        }
    });
</script>